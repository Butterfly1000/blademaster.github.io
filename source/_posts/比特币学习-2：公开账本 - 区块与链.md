---
title: 比特币学习-2：公开账本 - 区块与链
date: 2025-07-09 14:05:00
tags:
- 区块链
- 比特币
---

在第一部分中，我们把区块链比作一本“魔法书”，它的页面（区块）通过“魔法印记”（哈希）链接在一起。现在，我们就来揭开这个魔法的秘密，看看区块的内部构造，以及“链”是如何形成的。

---

### **1. 区块的解剖：一个数据容器**

一个区块，本质上就是一个记录着交易信息的数据包。它主要由两部分组成：

1.  **区块头（Block Header）**：这是区块的“索引卡”，包含了区块的元数据（metadata），比如它的身份ID、创建时间等。**这是实现“链接”的关键部分**。
2.  **交易列表（Transaction List）**：这是区块的“内容页”，记录了在这10分钟内发生的多笔交易详情。

把区块头想象成书的页眉，交易列表就是正文。页眉记录了页码和章节信息，正文记录了故事。

---

### **2. 区块头的构成：链接的奥秘所在**

区块头是区块链安全和不可篡改性的核心。它包含了几个关键字段：

| 字段 | 作用 | 类比 |
| --- | --- | --- |
| **前一个区块的哈希** | **最重要的字段！** 它包含了上一个区块头的哈希值。正是这个字段，将所有区块串联成链。 | 记录上一页的页码 |
| **默克尔树根（Merkle Root）** | 一个独特的哈希值，能代表该区块内**所有交易**的“指纹”。任何一笔交易的微小改动，都会导致这个根哈希完全不同。 | 整个章节所有文字的“内容摘要指纹” |
| **时间戳（Timestamp）** | 该区块被创建的大致时间。 | 页面打印时间 |
| **难度目标（Difficulty Target）** | 一个数值，规定了矿工挖矿时需要达到的计算难度。 | 解锁本页密码锁的难度 |
| **随机数（Nonce）** | 矿工通过暴力计算找到的“幸运数字”，是工作量证明（PoW）的答案。 | 打开密码锁的那个正确密码 |

---

### **3. “链”是如何形成的？**

区块链的“链”是通过区块头中的“前一个区块的哈希”字段来实现的。

**过程如下：**

1.  **区块100** 被成功挖出，它的区块头经过哈希计算，生成一个独一无二的哈希值，我们称之为 `Hash(100)`。
2.  当矿工开始挖 **区块101** 时，他们必须把 `Hash(100)` 这个值放进区块101的区块头里。
3.  然后，矿工再对包含了 `Hash(100)` 的区块101的区块头进行哈希计算，找到新的Nonce，最终生成 `Hash(101)`。
4.  这个过程无限重复，`Hash(101)` 会被放进区块102的头里，以此类推...

**这就形成了一个牢不可破的依赖链：**

`... -> 区块100 -> 区块101 -> 区块102 -> ...`
其中，区块101依赖区块100，区块102依赖区块101。

#### **为什么这让篡改变得不可能？**

假设一个攻击者想修改**区块100**里的一笔交易：

1.  他修改了交易，导致区块100的**默克尔树根**改变。
2.  默克尔树根改变，导致区块100的**区块头**改变。
3.  他必须重新进行工作量证明（挖矿），找到一个新的Nonce，才能为修改后的区块100生成一个合法的哈希值 `Hash(100')`。这本身就需要巨大的算力。
4.  更致命的是，这个新的 `Hash(100')` 与原始的 `Hash(100)` 完全不同。而区块101的头里记录的是原始的 `Hash(100)`。现在链断了！
5.  为了让链重新连上，他必须修改区块101的头，把 `Hash(100')` 放进去。
6.  接着，他必须重新为区块101挖矿，再为区块102、103...直到最新区块都重挖一遍！

这需要在短时间内拥有比全球所有其他矿工加起来还要多的算力（所谓的51%攻击），这在经济和物理上都是几乎不可能完成的任务。

---

### **总结**

区块链的不可篡改性，源于这种精妙的、环环相扣的设计：

- **哈希函数**提供了独一无二的“指纹”。
- **链式结构**将所有区块的命运绑定在一起。
- **工作量证明**为每一次链接都设置了巨大的能源成本。

这三者共同作用，使得任何对历史记录的修改都需要付出天文数字般的代价。

**在下一部分，我们将聚焦于这个过程中最耗费精力的环节：【挖矿与共识】。我们将详细了解工作量证明（PoW）到底是如何运作的，以及矿工们是如何通过竞争达成全网共识的。** 